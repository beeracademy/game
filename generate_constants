#!/bin/bash
set -euo pipefail

if [[ -z "${GIT_COMMIT_HASH:-}" ]]; then
	GIT_COMMIT_HASH=$(git rev-parse --short HEAD)
fi

cd src
(
	echo "// Generated by generate_constants"
	echo "export const GIT_COMMIT_HASH = '$GIT_COMMIT_HASH';"
	echo "export const ASSETS = ["
	find assets -type f -exec echo "  '{}'," ';'
	echo "];"
) > app/generated.ts
